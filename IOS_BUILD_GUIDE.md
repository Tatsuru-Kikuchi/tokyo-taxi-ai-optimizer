# 🛠️ iOS Build Troubleshooting Guide\n\n## 🔧 Fixed Metro Config Issue\n\nThe Metro configuration has been updated to properly extend `@expo/metro-config`. Here's what was changed:\n\n### ✅ **Solution Applied**\n\n1. **Updated `metro.config.js`** - Now properly extends Expo's default config\n2. **Added `eas.json`** - Optimized build configuration for iOS production\n3. **Configured proper asset handling** - Ensures all assets are included in production bundle\n\n### 📱 **Next Steps to Build iOS App**\n\n#### 1. **Install/Update Dependencies**\n```bash\n# Make sure you have the latest EAS CLI\nnpm install -g @expo/cli@latest\nnpm install -g eas-cli@latest\n\n# Update project dependencies\nnpm install\n# or\nyarn install\n```\n\n#### 2. **Verify Configuration**\n```bash\n# Check if your metro.config.js is now correct\ncat metro.config.js\n\n# Verify EAS configuration\neas config\n```\n\n#### 3. **Clear Cache and Rebuild**\n```bash\n# Clear Metro cache\nnpx expo start --clear\n\n# Clear EAS build cache\neas build --clear-cache\n```\n\n#### 4. **Run iOS Build Again**\n```bash\n# Now try the build command again\neas build --platform ios --profile production\n```\n\n### 🚨 **If You Still Get Errors**\n\n#### **Error: Missing Dependencies**\n```bash\n# Install missing Expo dependencies\nnpx expo install --fix\n\n# Install Metro config dependency\nnpm install @expo/metro-config\n```\n\n#### **Error: Apple Developer Account Issues**\n```bash\n# Configure your Apple Developer credentials\neas credentials:configure -p ios\n\n# Or let EAS manage credentials automatically\neas build --platform ios --profile production --auto-submit\n```\n\n#### **Error: Bundle Identifier Conflicts**\nUpdate `app.json` or `app.config.js`:\n```json\n{\n  \"expo\": {\n    \"ios\": {\n      \"bundleIdentifier\": \"com.yourname.tokyo-taxi-ai\"\n    }\n  }\n}\n```\n\n### 📋 **Complete Build Checklist**\n\n- [ ] ✅ Metro config properly extends `@expo/metro-config`\n- [ ] ✅ EAS configuration file created\n- [ ] ✅ Dependencies installed and updated\n- [ ] ✅ Apple Developer account configured\n- [ ] ✅ Bundle identifier set correctly\n- [ ] ✅ Build cache cleared\n- [ ] 🔄 Run build command: `eas build --platform ios --profile production`\n\n### 🎯 **Expected Build Process**\n\n1. **Validation** - EAS validates your configuration\n2. **Dependencies** - Installs all required packages\n3. **Metro Bundling** - Creates optimized JS bundle\n4. **Native Compilation** - Compiles iOS native code\n5. **Code Signing** - Signs with your Apple Developer certificates\n6. **Upload** - Uploads to Apple's servers\n7. **Success** - You get a downloadable `.ipa` file\n\n### 📱 **After Successful Build**\n\n1. **Download the .ipa file** from EAS dashboard\n2. **Test on physical device** using Xcode or TestFlight\n3. **Submit to App Store** using `eas submit`\n\n### 🆘 **Emergency Fallback**\n\nIf EAS build still fails, you can use local Expo development build:\n\n```bash\n# Create development build\nnpx expo run:ios\n\n# Or create local production build\nnpx expo build:ios --type archive\n```\n\n### 📞 **Support Resources**\n\n- **Expo Documentation**: https://docs.expo.dev/build/setup/\n- **EAS Build Guide**: https://docs.expo.dev/build/introduction/\n- **Metro Config**: https://docs.expo.dev/guides/customizing-metro/\n- **Apple Developer**: https://developer.apple.com/documentation/\n\n---\n\n## 🎉 **Ready for App Store Success!**\n\nWith the fixed Metro configuration, your Tokyo Taxi AI Optimizer should now build successfully for iOS production. The app is ready to help Tokyo taxi drivers increase their revenue by 30.2%!\n\n**🚀 After successful build, your app will be ready for App Store submission!**"