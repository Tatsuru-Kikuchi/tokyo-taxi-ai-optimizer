import React, { useState, useEffect } from 'react';\nimport { MapPin, Navigation, DollarSign, Clock, TrendingUp, Target, Zap, AlertTriangle } from 'lucide-react';\n\nconst DriverDashboard = ({ weatherData, trafficData, hotspots, recommendations }) => {\n  const [selectedHotspot, setSelectedHotspot] = useState(null);\n  const [earnings, setEarnings] = useState({\n    today: 0,\n    target: 33150,\n    hourly: 0\n  });\n\n  useEffect(() => {\n    // Simulate earnings tracking\n    const updateEarnings = () => {\n      const currentHour = new Date().getHours();\n      const hoursWorked = Math.max(0, currentHour - 6); // Assume started at 6 AM\n      const avgHourly = hotspots && hotspots[0] ? hotspots[0].ai_revenue_per_min * 60 : 4080;\n      \n      setEarnings({\n        today: Math.round(avgHourly * hoursWorked * 0.83), // 83% utilization\n        target: 33150,\n        hourly: Math.round(avgHourly)\n      });\n    };\n\n    updateEarnings();\n    const interval = setInterval(updateEarnings, 60000); // Update every minute\n    return () => clearInterval(interval);\n  }, [hotspots]);\n\n  const getRecommendationIcon = (type) => {\n    switch (type) {\n      case 'positioning': return <Target className=\"h-5 w-5\" />;\n      case 'weather': return <Cloud className=\"h-5 w-5\" />;\n      case 'traffic': return <AlertTriangle className=\"h-5 w-5\" />;\n      case 'earnings': return <DollarSign className=\"h-5 w-5\" />;\n      default: return <Zap className=\"h-5 w-5\" />;\n    }\n  };\n\n  const getPriorityColor = (priority) => {\n    switch (priority) {\n      case 'high': return 'border-l-red-500 bg-red-50';\n      case 'medium': return 'border-l-yellow-500 bg-yellow-50';\n      default: return 'border-l-green-500 bg-green-50';\n    }\n  };\n\n  const getDirections = (hotspot) => {\n    if (hotspot && hotspot.latitude && hotspot.longitude) {\n      const mapsUrl = `https://www.google.com/maps/dir/?api=1&destination=${hotspot.latitude},${hotspot.longitude}`;\n      window.open(mapsUrl, '_blank');\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Earnings Overview */}\n      <div className=\"bg-gradient-to-r from-green-500 to-blue-500 rounded-lg p-6 text-white\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h2 className=\"text-2xl font-bold\">Today's Earnings</h2>\n          <DollarSign className=\"h-8 w-8\" />\n        </div>\n        \n        <div className=\"grid grid-cols-3 gap-4\">\n          <div className=\"text-center\">\n            <p className=\"text-sm opacity-90\">Current</p>\n            <p className=\"text-3xl font-bold\">Â¥{earnings.today.toLocaleString()}</p>\n          </div>\n          <div className=\"text-center\">\n            <p className=\"text-sm opacity-90\">Target</p>\n            <p className=\"text-3xl font-bold\">Â¥{earnings.target.toLocaleString()}</p>\n          </div>\n          <div className=\"text-center\">\n            <p className=\"text-sm opacity-90\">Hourly Rate</p>\n            <p className=\"text-3xl font-bold\">Â¥{earnings.hourly.toLocaleString()}</p>\n          </div>\n        </div>\n        \n        <div className=\"mt-4\">\n          <div className=\"flex justify-between text-sm mb-1\">\n            <span>Progress to Target</span>\n            <span>{Math.round((earnings.today / earnings.target) * 100)}%</span>\n          </div>\n          <div className=\"w-full bg-white bg-opacity-20 rounded-full h-2\">\n            <div \n              className=\"bg-white h-2 rounded-full transition-all duration-300\"\n              style={{ width: `${Math.min(100, (earnings.today / earnings.target) * 100)}%` }}\n            ></div>\n          </div>\n        </div>\n      </div>\n\n      {/* AI Recommendations */}\n      <div className=\"bg-white rounded-lg shadow-lg p-6\">\n        <h3 className=\"text-xl font-bold mb-4 flex items-center\">\n          <Zap className=\"h-6 w-6 mr-2 text-yellow-500\" />\n          AI Recommendations\n        </h3>\n        \n        <div className=\"space-y-3\">\n          {recommendations && recommendations.map((rec, index) => (\n            <div key={index} className={`p-4 border-l-4 rounded-lg ${getPriorityColor(rec.priority)}`}>\n              <div className=\"flex items-start justify-between\">\n                <div className=\"flex items-start space-x-3\">\n                  <div className=\"mt-1\">\n                    {getRecommendationIcon(rec.type)}\n                  </div>\n                  <div className=\"flex-1\">\n                    <h4 className=\"font-semibold text-gray-900\">{rec.title}</h4>\n                    <p className=\"text-sm text-gray-600 mt-1\">{rec.description}</p>\n                    {rec.confidence && (\n                      <p className=\"text-xs text-gray-500 mt-2\">Confidence: {rec.confidence}%</p>\n                    )}\n                  </div>\n                </div>\n                <div className=\"ml-4\">\n                  <span className={`px-2 py-1 text-xs rounded-full ${\n                    rec.priority === 'high' ? 'bg-red-100 text-red-800' :\n                    rec.priority === 'medium' ? 'bg-yellow-100 text-yellow-800' :\n                    'bg-green-100 text-green-800'\n                  }`}>\n                    {rec.priority.toUpperCase()}\n                  </span>\n                </div>\n              </div>\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Top Hotspots */}\n      <div className=\"bg-white rounded-lg shadow-lg p-6\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <h3 className=\"text-xl font-bold flex items-center\">\n            <MapPin className=\"h-6 w-6 mr-2 text-blue-500\" />\n            Top Demand Hotspots\n          </h3>\n          <div className=\"text-sm text-gray-500\">\n            ðŸŽ¯ AI-Optimized Positioning\n          </div>\n        </div>\n        \n        <div className=\"grid gap-4\">\n          {hotspots && hotspots.slice(0, 5).map((hotspot, index) => (\n            <div \n              key={hotspot.name} \n              className={`p-4 border rounded-lg cursor-pointer transition-all duration-200 hover:shadow-md ${\n                selectedHotspot === index ? 'border-blue-500 bg-blue-50' : 'border-gray-200'\n              }`}\n              onClick={() => setSelectedHotspot(selectedHotspot === index ? null : index)}\n            >\n              <div className=\"flex items-center justify-between\">\n                <div className=\"flex items-center space-x-3\">\n                  <div className=\"w-8 h-8 bg-blue-500 text-white rounded-full flex items-center justify-center font-bold\">\n                    {index + 1}\n                  </div>\n                  <div>\n                    <h4 className=\"font-semibold text-lg\">{hotspot.name}</h4>\n                    <p className=\"text-sm text-gray-600\">Distance: ~{Math.floor(Math.random() * 15 + 5)} min</p>\n                  </div>\n                </div>\n                <div className=\"text-right\">\n                  <p className=\"text-2xl font-bold text-green-600\">Â¥{hotspot.ai_revenue_per_min}</p>\n                  <p className=\"text-sm text-gray-600\">/min</p>\n                </div>\n              </div>\n              \n              {selectedHotspot === index && (\n                <div className=\"mt-4 pt-4 border-t\">\n                  <div className=\"grid grid-cols-2 gap-4 mb-4\">\n                    <div>\n                      <p className=\"text-sm text-gray-600\">AI Advantage</p>\n                      <p className=\"font-semibold text-blue-600\">+{hotspot.improvement_percentage}%</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-gray-600\">Wait Time</p>\n                      <p className=\"font-semibold\">{hotspot.ai_wait_time} min</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-gray-600\">Hourly Potential</p>\n                      <p className=\"font-semibold text-green-600\">Â¥{Math.round(hotspot.ai_revenue_per_min * 60)}</p>\n                    </div>\n                    <div>\n                      <p className=\"text-sm text-gray-600\">Confidence</p>\n                      <p className=\"font-semibold\">{hotspot.confidence_score}%</p>\n                    </div>\n                  </div>\n                  \n                  {/* Traffic Impact */}\n                  {hotspot.traffic_impact && (\n                    <div className=\"mb-4 p-3 bg-gray-50 rounded\">\n                      <p className=\"text-sm font-medium text-gray-700 mb-1\">ðŸš‡ Traffic Impact</p>\n                      <p className=\"text-sm text-gray-600\">\n                        {hotspot.traffic_impact.station_name}: {hotspot.traffic_impact.operational_status}\n                        {hotspot.traffic_impact.delays > 0 && (\n                          <span className=\"text-orange-600\"> (+{hotspot.traffic_impact.delays}min delays)</span>\n                        )}\n                      </p>\n                    </div>\n                  )}\n                  \n                  <div className=\"flex space-x-3\">\n                    <button \n                      onClick={(e) => {\n                        e.stopPropagation();\n                        getDirections(hotspot);\n                      }}\n                      className=\"flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors flex items-center justify-center space-x-2\"\n                    >\n                      <Navigation className=\"h-4 w-4\" />\n                      <span>Get Directions</span>\n                    </button>\n                    <button \n                      onClick={(e) => {\n                        e.stopPropagation();\n                        // Would implement route optimization\n                        alert(`Optimizing route to ${hotspot.name}...`);\n                      }}\n                      className=\"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 transition-colors flex items-center justify-center space-x-2\"\n                    >\n                      <Target className=\"h-4 w-4\" />\n                      <span>Set Target</span>\n                    </button>\n                  </div>\n                </div>\n              )}\n            </div>\n          ))}\n        </div>\n      </div>\n\n      {/* Performance Metrics */}\n      <div className=\"bg-white rounded-lg shadow-lg p-6\">\n        <h3 className=\"text-xl font-bold mb-4 flex items-center\">\n          <TrendingUp className=\"h-6 w-6 mr-2 text-green-500\" />\n          Performance Metrics\n        </h3>\n        \n        <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n          <div className=\"text-center p-4 bg-blue-50 rounded-lg\">\n            <Clock className=\"h-8 w-8 mx-auto mb-2 text-blue-500\" />\n            <p className=\"text-sm text-gray-600\">Avg Trip Time</p>\n            <p className=\"text-2xl font-bold text-blue-600\">28.7 min</p>\n            <p className=\"text-xs text-green-600\">-11.4% vs traditional</p>\n          </div>\n          \n          <div className=\"text-center p-4 bg-green-50 rounded-lg\">\n            <DollarSign className=\"h-8 w-8 mx-auto mb-2 text-green-500\" />\n            <p className=\"text-sm text-gray-600\">Revenue/Min</p>\n            <p className=\"text-2xl font-bold text-green-600\">Â¥68.1</p>\n            <p className=\"text-xs text-green-600\">+30.2% improvement</p>\n          </div>\n          \n          <div className=\"text-center p-4 bg-purple-50 rounded-lg\">\n            <Target className=\"h-8 w-8 mx-auto mb-2 text-purple-500\" />\n            <p className=\"text-sm text-gray-600\">Utilization</p>\n            <p className=\"text-2xl font-bold text-purple-600\">83%</p>\n            <p className=\"text-xs text-green-600\">+27.7% improvement</p>\n          </div>\n          \n          <div className=\"text-center p-4 bg-yellow-50 rounded-lg\">\n            <Zap className=\"h-8 w-8 mx-auto mb-2 text-yellow-500\" />\n            <p className=\"text-sm text-gray-600\">AI Score</p>\n            <p className=\"text-2xl font-bold text-yellow-600\">92%</p>\n            <p className=\"text-xs text-blue-600\">University of Tokyo</p>\n          </div>\n        </div>\n      </div>\n      \n      {/* Research Attribution */}\n      <div className=\"bg-gradient-to-r from-indigo-100 to-purple-100 rounded-lg p-4\">\n        <div className=\"text-center\">\n          <p className=\"text-sm font-medium text-indigo-900\">ðŸ”¬ Powered by University of Tokyo Research</p>\n          <p className=\"text-xs text-indigo-700 mt-1\">\n            Faculty of Economics â€¢ 30.2% productivity improvement validated â€¢ 0.847 weather correlation\n          </p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default DriverDashboard;"